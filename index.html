<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Абайдың 7-қара сөзі | Сандық дәптер</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Merriweather және Cormorant Garamond қаріптері (Қазақ қарпін толық қолдайды) -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Merriweather:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Баптаулар */
        body {
            font-family: 'Cormorant Garamond', serif;
            color: #2d2d2d;
            background-color: #f4f1ea; /* Ескі қағаз түсі */
        }
        
        /* Тақырып қарпі өзгертілді */
        .header-font {
            font-family: 'Merriweather', serif;
        }

        /* Параллакс эффектісі */
        .parallax {
            background-image: url('https://cdn-kz.kursiv.media/wp-content/uploads/2025/07/14-29-1-1024x576.jpg');
            min-height: 600px; 
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
        }

        .overlay {
            background: linear-gradient(to bottom, rgba(45, 20, 20, 0.4), rgba(20, 10, 10, 0.8));
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Интерактивті сөздер */
        .interactive-word {
            color: #800020;
            font-weight: bold;
            border-bottom: 2px dashed #800020;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .interactive-word:hover {
            background-color: #fce7f3;
            color: #be123c;
        }

        /* Түстер */
        .bg-bordo { background-color: #800020; }
        .text-bordo { color: #800020; }
        .border-bordo { border-color: #800020; }
        .bg-deep-blue { background-color: #1e3a8a; }

        /* Modal */
        .modal {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- ӘДЕБИ СТИЛЬДЕГІ ТЕСТ ДИЗАЙНЫ --- */
        .quiz-paper {
            background-color: #fffefb;
            border: 1px solid #dcdcdc;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-image: linear-gradient(#f4f1ea 1px, transparent 1px);
            background-size: 100% 2rem;
            position: relative;
            z-index: 10; /* Қағаз фоннан жоғары */
        }
        
        .quiz-question-card {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #800020;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .quiz-question-card:hover {
            transform: translateX(5px);
        }

        .quiz-option {
            transition: all 0.2s;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background-color: #fff;
        }
        .quiz-option:hover {
            background-color: #fff1f2;
            border-color: #fda4af;
        }
        .quiz-option input:checked + span {
            color: #9f1239;
            font-weight: bold;
        }

        /* Drag and Drop Items */
        .draggable-item {
            background-color: #fff;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            cursor: move;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
        }
        .draggable-item:hover {
            border-color: #800020;
            background-color: #fffafa;
        }

        /* Input styling for Open questions */
        .literary-input {
            border: none;
            border-bottom: 2px solid #9ca3af;
            background: transparent;
            font-family: 'Merriweather', serif; /* Input-ке де жаңа қаріп */
            font-size: 1.2rem;
            color: #374151;
            padding: 0.5rem 0;
            width: 100%;
            transition: border-color 0.3s;
        }
        .literary-input:focus {
            outline: none;
            border-color: #800020;
        }

        /* --- АНИМАЦИЯЛЫҚ ҚАЛҚЫМАЛЫ ЭЛЕМЕНТТЕР --- */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        @keyframes drift {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(15px, -15px) scale(1.05); }
            100% { transform: translate(0, 0) scale(1); }
        }

        .floating-element {
            position: absolute;
            pointer-events: none; /* Элементтер басылмайды, тек көрінеді */
            z-index: 50; /* Ең беткі қабатқа шығару */
            opacity: 0.6; /* Көріну деңгейін арттыру */
            color: #800020;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2)); /* Көлеңке қосу */
        }

        .anim-float { animation: float 6s ease-in-out infinite; }
        .anim-drift { animation: drift 8s ease-in-out infinite; }
        .anim-delay-2 { animation-delay: 2s; }
        .anim-delay-4 { animation-delay: 4s; }

    </style>
</head>
<body class="antialiased">

    <!-- 1. Басқы бөлім -->
    <header class="parallax flex items-center justify-center text-center text-white">
        <div class="overlay flex flex-col items-center justify-center p-4">
            <h1 class="header-font text-5xl md:text-7xl mb-4 drop-shadow-lg tracking-wide font-black">Жетінші қара сөз</h1>
            <p class="text-xl md:text-3xl font-light italic opacity-90 font-serif">Абай Құнанбайұлы</p>
            <div class="mt-8 w-32 h-1 bg-white opacity-60 rounded"></div>
            <p class="mt-4 text-sm uppercase tracking-widest text-gray-200">Интерактивті сабақ</p>
        </div>
    </header>

    <!-- 2. Негізгі мәтін бөлімі -->
    <main class="container mx-auto px-4 py-12 md:py-16 max-w-4xl">
        <div class="bg-white p-10 md:p-14 shadow-2xl rounded-sm relative border border-gray-200">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-900 via-red-700 to-red-900"></div>
            
            <h2 class="text-4xl text-center mb-10 text-bordo font-bold header-font border-b-2 border-gray-100 pb-4">Түпнұсқа мәтін</h2>
            
            <div class="text-xl md:text-2xl leading-loose text-justify space-y-8 text-gray-800 font-serif">
                <p>
                    <span class="text-4xl float-left mr-2 font-bold text-bordo header-font">Ж</span>ас бала анадан туғанда екі түрлі мінезбен туады: біреуі - ішсем, жесем, ұйқтасам деп тұрады. Бұлар - тәннің құмары, бұлар болмаса, тән жанға қонақ үй бола алмайды. Һәм өзі өспейді, қуат таппайды. Біреуі - білсем екен демеклік. Не көрсе соған талпынып, жалтыр-жұлтыр еткен болса, оған қызығып, аузына салып, дәмін татып қарап, тамағына, бетіне басып қарап, сырнай-керней болса, дауысына ұмтылып, онан ержетіңкірегенде ит үрсе де, мал шуласа да, біреу күлсе де, біреу жыласа да тұра жүгіріп, «ол немене?», «бұл немене?» деп, «ол неге үйтеді?» деп, «бұл неге бүйтеді?» деп, көзі көрген, құлағы естігеннің бәрін сұрап, тыныштық көрмейді. Мұның бәрі - <span class="interactive-word" onclick="openModal('жан құмары')">жан құмары</span>, білсем екен, көрсем екен, үйренсем екен деген.
                </p>
                <p>
                    Дүниенің көрінген һәм көрінбеген сырын түгелдеп, ең болмаса денелеп білмесе, адамдықпен орны болмайды. Оны білмеген соң, ол жан адам жаны болмай, хайуан жаны болады. Әзелде құдай тағала хайуанның жанынан адамның жанын ірі жаратқан, сол әсерін көрсетіп жаратқаны. Сол қуат жетпеген, ми толмаған ессіз бала күндегі «бұл немене, ол немене?» деп, бір нәрсені сұрап білсем екен дегенде, ұйқы, тамақ та есімізден шығып кететұғын құмарымызды, ержеткен соң, ақыл кіргенде, орнын тауып ізденіп, кісісін тауып сұранып, ғылым тапқандардың жолына неге салмайды екеміз?
                </p>
                <p>
                    Сол өрістетіп, өрісімізді ұзартып, құмарланып жиған қазынамызды көбейтсек керек, бұл жанның тамағы еді. Тәннен жан артық еді, тәнді жанға бас ұрғызса керек еді. Жоқ, біз олай қылмадық, ұзақтай шулап, қарғадай барқылдап, ауылдағы боқтықтан ұзамадық. Жан бізді жас күнімізде билеп жүр екен. Ержеткен соң, күш енген соң, оған билетпедік. Жанды тәнге бас ұрғыздық, ешнәрсеге көңілменен қарамадық, көзбен де жақсы қарамадық, көңіл айтып тұрса, сенбедік. Көзбен көрген нәрсенің де сыртын көргенге-ақ тойдық. Сырын қалай болады деп көңілге салмадық, оны білмеген кісінің несі кетіпті дейміз. Біреу кеткенін айтса да, ұқпаймыз. Біреу ақыл айтса: «Ой, тәңірі-ай, кімнен кім артық дейсің!» - дейміз, артығын білмейміз, айтып тұрса ұқпаймыз.
                </p>
                <p>
                    <span class="interactive-word" onclick="openModal('көкірек көзі')">Көкіректе сәуле</span> жоқ, көңілде сенім жоқ. Құр көзбенен көрген біздің хайуан малдан неміз артық? Қайта, бала күнімізде жақсы екенбіз. Білсек те, білмесек те, білсек екен деген адамның баласы екенбіз. Енді осы күнде хайуаннан да жаманбыз. Хайуан білмейді, білемін деп таласпайды. Біз түк білмейміз, біз де білеміз деп надандығымызды білімділікке бермей таласқанда, өлер-тірілерімізді білмей, күре тамырымызды адырайтып кетеміз.
                </p>
            </div>
        </div>
    </main>

    <!-- 3. ТЕСТ БЛОГЫ -->
    <section class="py-16 relative overflow-visible">
        
        <!-- Қалқымалы Декорлар -->
        <div class="floating-element anim-float" style="top: -20px; left: 2%; width: 100px;">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A3,3 0 0,0 9,5V7H6A2,2 0 0,0 4,9V19A2,2 0 0,0 6,21H18A2,2 0 0,0 20,19V9A2,2 0 0,0 18,7H15V5A3,3 0 0,0 12,2M12,4A1,1 0 0,1 13,5V7H11V5A1,1 0 0,1 12,4M6,9H18V19H6V9Z" />
            </svg>
        </div>
        <div class="floating-element anim-drift anim-delay-2" style="top: 50px; right: 2%; width: 140px;">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
            </svg>
        </div>
        <div class="floating-element anim-float anim-delay-4" style="bottom: 10%; left: 5%; width: 60px;">
             <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,22C7.5,22 4,18.5 4,14C4,10 12,2 12,2C12,2 20,10 20,14C20,18.5 16.5,22 12,22Z" />
            </svg>
        </div>

        <div class="container mx-auto px-4 max-w-4xl relative z-10">
            <div class="text-center mb-12">
                <span class="block text-bordo text-lg font-bold tracking-widest uppercase mb-2">Білімді бекіту</span>
                <h3 class="text-4xl md:text-5xl text-gray-800 header-font">Тест тапсырмалары</h3>
                <div class="w-24 h-1 bg-bordo mx-auto mt-4"></div>
            </div>
            
            <form id="quizForm" class="quiz-paper p-8 md:p-12 rounded shadow-2xl relative">
                <div id="quizContainer" class="space-y-8"></div>
                <div class="text-center pt-10 border-t-2 border-dashed border-gray-300 mt-8">
                    <button type="button" onclick="calculateScore()" 
                        class="bg-bordo hover:bg-red-900 text-white text-xl font-serif py-3 px-12 rounded-sm shadow-xl transition transform hover:-translate-y-1 hover:shadow-2xl flex items-center justify-center mx-auto gap-2">
                        <span>Нәтижені тексеру</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </form>

            <div id="quizResult" class="hidden mt-10 p-8 bg-white rounded shadow-2xl border-l-8 border-bordo text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h4 class="text-3xl font-bold mb-2 header-font text-gray-800">Қорытынды</h4>
                <div class="text-6xl font-bold text-bordo my-4 header-font">
                    <span id="scoreDisplay">0</span><span class="text-2xl text-gray-400">/14</span>
                </div>
                <p id="resultMessage" class="text-xl font-serif italic text-gray-700"></p>
            </div>
        </div>
    </section>

    <!-- 4. Эссе жазу бөлімі -->
    <section class="bg-white py-16 border-t border-gray-200">
        <div class="container mx-auto px-4 max-w-3xl">
            <h3 class="text-4xl text-center text-bordo mb-4 header-font">Ой толғау</h3>
            <p class="text-center text-gray-500 mb-10 italic font-serif text-lg">"Адамның жан құмары – білсем екен демеклік..."</p>

            <div class="bg-gray-50 p-10 rounded-sm shadow-inner border border-gray-200">
                <label for="essayInput" class="block text-2xl font-bold mb-6 text-gray-800 header-font">
                    Тақырып: <span class="text-bordo border-b border-bordo pb-1">Осы қара сөзден не түйдім? Менің жан құмарым қандай?</span>
                </label>
                
                <textarea id="essayInput" rows="8" 
                    class="w-full p-6 border border-gray-300 bg-white rounded-sm focus:outline-none focus:border-bordo focus:ring-1 focus:ring-bordo text-lg font-serif leading-relaxed shadow-sm"
                    placeholder="Қалам ұшымен ойыңызды өрнектеңіз... (Кемінде 6 сөйлем)"></textarea>
                
                <div class="flex justify-end mt-6">
                    <button onclick="checkEssay()" class="bg-gray-800 hover:bg-black text-white font-serif py-3 px-8 rounded-sm shadow transition duration-300">
                        Жіберу
                    </button>
                </div>

                <!-- Кері байланыс (ЖАҢАРТЫЛҒАН) -->
                <div id="feedbackArea" class="hidden mt-8 rounded bg-white border border-gray-200 shadow overflow-hidden">
                    <div class="bg-gray-100 p-4 border-b border-gray-200">
                        <h4 id="feedbackTitle" class="font-bold text-xl header-font text-gray-800">Эссе нәтижесі</h4>
                    </div>
                    
                    <div class="p-6">
                        <!-- Жалпы пікір -->
                        <p id="feedbackText" class="text-gray-700 text-lg mb-6 italic"></p>

                        <!-- Критерийлер кестесі -->
                        <div class="space-y-4">
                            <!-- 1. Көлемі -->
                            <div class="flex items-start justify-between border-b border-dashed border-gray-200 pb-3">
                                <div class="w-1/3">
                                    <span class="font-bold text-gray-800 block">Көлемі (6 сөйлем)</span>
                                    <span class="text-xs text-gray-500">Эссенің толықтығы</span>
                                </div>
                                <div class="w-2/3 pl-4">
                                    <div class="flex items-center justify-between mb-1">
                                        <span id="crit1-comment" class="text-sm text-gray-700"></span>
                                        <span id="crit1-score" class="font-bold text-bordo bg-red-50 px-2 py-0.5 rounded">0/2</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div id="crit1-bar" class="bg-bordo h-2 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- 2. Мазмұны -->
                            <div class="flex items-start justify-between border-b border-dashed border-gray-200 pb-3">
                                <div class="w-1/3">
                                    <span class="font-bold text-gray-800 block">Мазмұны</span>
                                    <span class="text-xs text-gray-500">Кілт сөздердің қолданылуы</span>
                                </div>
                                <div class="w-2/3 pl-4">
                                    <div class="flex items-center justify-between mb-1">
                                        <span id="crit2-comment" class="text-sm text-gray-700"></span>
                                        <span id="crit2-score" class="font-bold text-bordo bg-red-50 px-2 py-0.5 rounded">0/2</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div id="crit2-bar" class="bg-bordo h-2 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- 3. Өзіндік пікір -->
                            <div class="flex items-start justify-between">
                                <div class="w-1/3">
                                    <span class="font-bold text-gray-800 block">Өзіндік пікір</span>
                                    <span class="text-xs text-gray-500">"Мен", "Ойымша" сөздері</span>
                                </div>
                                <div class="w-2/3 pl-4">
                                    <div class="flex items-center justify-between mb-1">
                                        <span id="crit3-comment" class="text-sm text-gray-700"></span>
                                        <span id="crit3-score" class="font-bold text-bordo bg-red-50 px-2 py-0.5 rounded">0/1</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div id="crit3-bar" class="bg-bordo h-2 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-4 border-t border-gray-200 flex justify-between items-center">
                        <span class="text-gray-600 font-serif italic">Жалпы балл:</span>
                        <div id="finalScoreBadge" class="text-2xl font-bold text-bordo">0/5</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 text-center border-t-4 border-bordo">
        <div class="container mx-auto">
            <p class="text-2xl font-serif italic mb-2">"Адам болам десеңіз..."</p>
            <div class="w-16 h-px bg-gray-600 mx-auto my-4"></div>
            <p class="text-sm opacity-60 font-sans tracking-wide">&copy; 2025 жыл. @AinurJI</p>
        </div>
    </footer>

    <!-- Modal Info -->
    <div id="infoModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 px-4 backdrop-blur-sm">
        <div class="bg-white rounded shadow-2xl max-w-lg w-full p-8 relative border-t-8 border-bordo transform transition-all scale-100">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-bordo text-3xl leading-none">&times;</button>
            <h3 id="modalTitle" class="text-3xl font-bold text-bordo mb-4 header-font border-b pb-2"></h3>
            <p id="modalDescription" class="text-xl leading-relaxed text-gray-700 font-serif"></p>
        </div>
    </div>

    <script>
        /* --- 1. СӨЗДІК ЖӘНЕ MODAL ФУНКЦИЯЛАРЫ --- */
        const dictionary = {
            'жан құмары': { title: 'Жан құмары', desc: 'Адамның білуге, үйренуге, ақиқатты тануға деген ішкі рухани талпынысы. Бұл жанды өсіретін күш.' },
            'көкірек көзі': { title: 'Көкірек көзі', desc: 'Рухани ояулық, парасаттылық. Жүрекпен сезіну және ақылмен терең бойлау қабілеті.' }
        };

        const modal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDescription');

        function openModal(key) {
            if (dictionary[key]) {
                modalTitle.textContent = dictionary[key].title;
                modalDesc.textContent = dictionary[key].desc;
                modal.classList.add('active');
            }
        }
        function closeModal() { modal.classList.remove('active'); }
        window.onclick = function(e) { if (e.target == modal) closeModal(); }

        /* --- 2. ТЕСТ ДЕРЕКТЕРІ (14 сұрақ) --- */
        const questions = [
            {
                id: 1, type: 'single',
                question: "1. Абайдың айтуынша, бала туғанда неше түрлі мінезбен туады?",
                options: ["Бір", "Екі", "Үш", "Төрт"],
                correct: "Екі"
            },
            {
                id: 2, type: 'boolean',
                question: "2. «Ішсем, жесем, ұйқтасам» деген талап – жан құмарына жатады. (Ақиқат/Жалған)",
                options: ["Ақиқат", "Жалған"],
                correct: "Жалған"
            },
            {
                id: 3, type: 'open',
                question: "3. «Білсем екен, көрсем екен, үйренсем екен» деген ұмтылысты Абай қалай атайды?",
                correct: ["жан құмары", "жан құмар", "жан құмары."] 
            },
            {
                id: 4, type: 'matching',
                question: "4. Сәйкестендіріңіз:",
                pairs: [
                    { term: "Тән құмары", def: "Ішсем, жесем, ұйқтасам" },
                    { term: "Жан құмары", def: "Білсем екен, көрсем екен" },
                    { term: "Хайуан жаны", def: "Дүниенің сырын білмеу" }
                ]
            },
            {
                id: 5, type: 'multi',
                question: "5. Тән құмары не үшін қажет? (Бірнеше жауап)",
                options: ["Тән жанға қонақ үй болу үшін", "Рухани баю үшін", "Тәннің өсуі мен қуат алуы үшін", "Мақтаныш үшін"],
                correct: ["Тән жанға қонақ үй болу үшін", "Тәннің өсуі мен қуат алуы үшін"]
            },
            {
                id: 6, type: 'ordering',
                question: "6. Адам өмірінің кезеңдерін ретімен орналастырыңыз:",
                items: ["Жас баланың дүниеге келуі", "«Бұл немене?» деп сұрау (Жан құмары)", "Ержеткен соң жанды тәнге билету", "Хайуаннан да жаман болу"]
            },
            {
                id: 7, type: 'single',
                question: "7. Көкіректе сәуле жоқ болса, көңілде не жоқ?",
                options: ["Қуаныш", "Қайғы", "Сенім", "Үміт"],
                correct: "Сенім"
            },
            {
                id: 8, type: 'boolean',
                question: "8. Абайдың ойынша, біз ержеткен соң «жан құмарын» күшейтіп, ғылым жолына түстік.",
                options: ["Ақиқат", "Жалған"],
                correct: "Жалған"
            },
            {
                id: 9, type: 'open',
                question: "9. Жанның тамағы не?",
                correct: ["ғылым", "білім", "қазына", "құмарланып жиған қазына"]
            },
            {
                id: 10, type: 'matching',
                question: "10. Салыстыру:",
                pairs: [
                    { term: "Хайуан", def: "Білмейді, білемін деп таласпайды" },
                    { term: "Надан адам", def: "Білмейді, бірақ білемін деп таласады" }
                ]
            },
            {
                id: 11, type: 'single',
                question: "11. Тәннен не артық болуы керек еді?",
                options: ["Жан", "Байлық", "Мансап", "Күш"],
                correct: "Жан"
            },
            {
                id: 12, type: 'multi',
                question: "12. Ержеткен соң адамдар немен айналысып кетті?",
                options: ["Ғылым іздеумен", "Ұзақтай шулаумен", "Қарғадай барқылдаумен", "Көкірек көзін ашумен"],
                correct: ["Ұзақтай шулаумен", "Қарғадай барқылдаумен"]
            },
            {
                id: 13, type: 'boolean',
                question: "13. Құр көзбен көргеннің хайуан малдан айырмашылығы шамалы.",
                options: ["Ақиқат", "Жалған"],
                correct: "Ақиқат"
            },
            {
                id: 14, type: 'open',
                question: "14. Бұл нешінші қара сөз?",
                correct: ["7", "жеті", "жетінші", "7-қара сөз"]
            }
        ];

        /* --- 3. ТЕСТТІ РЕНДЕРЛЕУ ФУНКЦИЯЛАРЫ --- */
        const quizContainer = document.getElementById('quizContainer');

        function renderQuiz() {
            quizContainer.innerHTML = '';
            questions.forEach((q, index) => {
                const div = document.createElement('div');
                div.className = 'quiz-question-card'; // Жаңа стиль
                div.innerHTML = `<p class="font-bold text-xl mb-4 text-bordo header-font">${q.question}</p>`;

                // Типке байланысты рендерлеу
                if (q.type === 'single' || q.type === 'boolean') {
                    q.options.forEach(opt => {
                         div.innerHTML += `
                            <label class="quiz-option flex items-center space-x-3 cursor-pointer">
                                <input type="radio" name="q${q.id}" value="${opt}" class="text-bordo focus:ring-bordo w-5 h-5">
                                <span class="text-lg font-serif text-gray-700">${opt}</span>
                            </label>`;
                    });

                } else if (q.type === 'multi') {
                    q.options.forEach(opt => {
                        div.innerHTML += `
                            <label class="quiz-option flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" name="q${q.id}" value="${opt}" class="text-bordo focus:ring-bordo w-5 h-5 rounded">
                                <span class="text-lg font-serif text-gray-700">${opt}</span>
                            </label>`;
                    });
                } else if (q.type === 'open') {
                    div.innerHTML += `
                        <input type="text" name="q${q.id}" class="literary-input" placeholder="Жауапты осында жазыңыз...">`;
                } else if (q.type === 'matching') {
                    const definitions = q.pairs.map(p => p.def).sort(() => Math.random() - 0.5); 
                    q.pairs.forEach((pair, idx) => {
                        let optionsHTML = `<option value="">Таңдаңыз...</option>` + 
                            definitions.map(d => `<option value="${d}">${d}</option>`).join('');
                        div.innerHTML += `
                            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 bg-gray-50 p-3 rounded border border-gray-200">
                                <span class="font-bold text-lg w-full md:w-1/3 mb-2 md:mb-0 text-gray-800 font-serif">${pair.term}</span>
                                <span class="hidden md:inline mx-2 text-bordo">❧</span>
                                <select name="q${q.id}_${idx}" class="w-full md:w-2/3 p-2 border border-gray-300 rounded bg-white font-serif text-gray-700 focus:border-bordo focus:outline-none">${optionsHTML}</select>
                            </div>`;
                    });
                } else if (q.type === 'ordering') {
                    const shuffledItems = [...q.items].sort(() => Math.random() - 0.5);
                    div.innerHTML += `<div class="ordering-container space-y-2" id="order_${q.id}"></div>`;
                    setTimeout(() => {
                        const container = document.getElementById(`order_${q.id}`);
                        shuffledItems.forEach((item, idx) => {
                            const itemDiv = document.createElement('div');
                            itemDiv.className = 'draggable-item flex justify-between items-center shadow-sm';
                            itemDiv.innerHTML = `
                                <span class="item-text flex-1">${item}</span>
                                <div class="flex flex-col ml-2 space-y-1">
                                    <button type="button" class="px-2 bg-gray-100 hover:bg-gray-200 rounded text-gray-600 leading-none py-1" onclick="moveItem(this, -1)">▲</button>
                                    <button type="button" class="px-2 bg-gray-100 hover:bg-gray-200 rounded text-gray-600 leading-none py-1" onclick="moveItem(this, 1)">▼</button>
                                </div>
                            `;
                            container.appendChild(itemDiv);
                        });
                    }, 0);
                }

                // Нәтиже көрсету орны
                const feedbackDiv = document.createElement('div');
                feedbackDiv.id = `feedback_q${q.id}`;
                feedbackDiv.className = 'mt-3 text-lg font-serif italic hidden border-t pt-2 border-gray-100';
                div.appendChild(feedbackDiv);

                quizContainer.appendChild(div);
            });
        }

        // Реттілік сұрағында элементті жылжыту
        window.moveItem = function(btn, direction) {
            const item = btn.closest('.draggable-item');
            const container = item.parentNode;
            const items = Array.from(container.children);
            const index = items.indexOf(item);
            
            if (direction === -1 && index > 0) {
                container.insertBefore(item, items[index - 1]);
            } else if (direction === 1 && index < items.length - 1) {
                container.insertBefore(item, items[index + 1].nextSibling);
            }
        }

        /* --- 4. ТЕСТТІ ТЕКСЕРУ ЛОГИКАСЫ --- */
        function calculateScore() {
            let score = 0;
            
            questions.forEach(q => {
                const feedbackEl = document.getElementById(`feedback_q${q.id}`);
                feedbackEl.classList.remove('hidden');
                let isCorrect = false;

                if (q.type === 'single' || q.type === 'boolean') {
                    const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                    if (selected && selected.value === q.correct) isCorrect = true;
                } 
                else if (q.type === 'multi') {
                    const checked = Array.from(document.querySelectorAll(`input[name="q${q.id}"]:checked`)).map(c => c.value);
                    if (checked.length === q.correct.length && checked.every(val => q.correct.includes(val))) {
                        isCorrect = true;
                    }
                }
                else if (q.type === 'open') {
                    const valEl = document.querySelector(`input[name="q${q.id}"]`);
                    const val = valEl ? valEl.value.toLowerCase().trim() : "";
                    if (q.correct.some(ans => val.includes(ans.toLowerCase()))) isCorrect = true;
                }
                else if (q.type === 'matching') {
                    const selects = document.querySelectorAll(`select[name^="q${q.id}_"]`);
                    let matchCount = 0;
                    selects.forEach((sel, idx) => {
                        if (sel.value === q.pairs[idx].def) matchCount++;
                    });
                    if (matchCount === q.pairs.length) isCorrect = true;
                }
                else if (q.type === 'ordering') {
                    const container = document.getElementById(`order_${q.id}`);
                    const currentOrder = Array.from(container.children).map(div => div.querySelector('.item-text').innerText);
                    if (JSON.stringify(currentOrder) === JSON.stringify(q.items)) isCorrect = true;
                }

                if (isCorrect) {
                    score++;
                    feedbackEl.innerHTML = `<span class="text-green-700 flex items-center">✅ Дұрыс</span>`;
                    feedbackEl.parentElement.classList.add('border-l-4', 'border-green-500'); // Visual cue
                    feedbackEl.parentElement.classList.remove('border-l-4', 'border-bordo');
                } else {
                    let correctMsg = '';
                    if(q.type === 'single' || q.type === 'boolean') correctMsg = q.correct;
                    else if(q.type === 'open') correctMsg = q.correct[0];
                    else correctMsg = '';
                    
                    feedbackEl.innerHTML = `<span class="text-red-700">❌ Қате. ${correctMsg ? 'Дұрысы: ' + correctMsg : ''}</span>`;
                }
            });

            // Нәтижені көрсету
            const resultBox = document.getElementById('quizResult');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const resultMessage = document.getElementById('resultMessage');

            resultBox.classList.remove('hidden');
            scoreDisplay.innerText = score;

            if (score === 14) {
                resultMessage.innerText = "Керемет! Сіз даналықтың кілтін таптыңыз.";
                resultMessage.className = "text-xl font-serif text-green-800 font-bold";
            } else if (score >= 10) {
                resultMessage.innerText = "Жақсы нәтиже. Білім жолындағы ізденісіңіз мақтауға тұрарлық.";
                resultMessage.className = "text-xl font-serif text-blue-800";
            } else {
                resultMessage.innerText = "Әлі де іздену керек. Мәтінге қайта үңіліңіз.";
                resultMessage.className = "text-xl font-serif text-red-800";
            }
            
            resultBox.scrollIntoView({behavior: "smooth"});
        }

        /* --- 5. ЭССЕ ТЕКСЕРУ (Жаңартылған) --- */
        function checkEssay() {
            const rawText = document.getElementById('essayInput').value.trim();
            const feedbackArea = document.getElementById('feedbackArea');
            const feedbackTitle = document.getElementById('feedbackTitle');
            const feedbackText = document.getElementById('feedbackText');
            const finalScoreBadge = document.getElementById('finalScoreBadge');

            feedbackArea.classList.remove('hidden');
            
            const sentences = rawText.split(/[.!?]+/).filter(s => s.trim().length > 0);
            
            // --- 1. Көлемі (2 ұпай) ---
            let score1 = 0;
            let comment1 = "";
            if (sentences.length >= 6) {
                score1 = 2;
                comment1 = "Талап толық орындалды.";
            } else if (sentences.length >= 3) {
                score1 = 1;
                comment1 = `Орташа. Әлі ${6 - sentences.length} сөйлем жетіспейді.`;
            } else {
                score1 = 0;
                comment1 = "Тым қысқа. Ойыңызды тарқатыңыз.";
            }
            
            // --- 2. Мазмұны (2 ұпай) ---
            const keywords = ['білім', 'ғылым', 'үйрену', 'талап', 'жан', 'көкірек', 'құмар', 'тән', 'надан', 'хайуан'];
            let found = 0;
            keywords.forEach(k => { if(rawText.toLowerCase().includes(k)) found++; });
            
            let score2 = 0;
            let comment2 = "";
            if (found >= 4) {
                score2 = 2;
                comment2 = "Тақырып терең ашылған.";
            } else if (found >= 2) {
                score2 = 1;
                comment2 = "Негізгі сөздер бар, бірақ аз.";
            } else {
                score2 = 0;
                comment2 = "Тақырыпқа қатысты сөздер жоқ.";
            }

            // --- 3. Өзіндік пікір (1 ұпай) ---
            const opinionWords = ['мен', 'ойымша', 'пікірім', 'түйдім', 'түсіндім', 'біз'];
            let foundOpinion = 0;
            opinionWords.forEach(w => { if(rawText.toLowerCase().includes(w)) foundOpinion++; });

            let score3 = 0;
            let comment3 = "";
            if (foundOpinion >= 1) {
                score3 = 1;
                comment3 = "Жеке көзқарас байқалады.";
            } else {
                score3 = 0;
                comment3 = "'Менің ойымша' деп бастап көріңіз.";
            }

            // Жалпы есеп
            const totalScore = score1 + score2 + score3;
            
            // UI Жаңарту
            document.getElementById('crit1-score').innerText = `${score1}/2`;
            document.getElementById('crit1-bar').style.width = `${(score1/2)*100}%`;
            document.getElementById('crit1-comment').innerText = comment1;

            document.getElementById('crit2-score').innerText = `${score2}/2`;
            document.getElementById('crit2-bar').style.width = `${(score2/2)*100}%`;
            document.getElementById('crit2-comment').innerText = comment2;

            document.getElementById('crit3-score').innerText = `${score3}/1`;
            document.getElementById('crit3-bar').style.width = `${(score3/1)*100}%`;
            document.getElementById('crit3-comment').innerText = comment3;

            finalScoreBadge.innerText = `${totalScore}/5`;

            // Қорытынды сөз
            if (totalScore === 5) {
                feedbackText.innerText = "Керемет! Сіз тақырыпты толық ашып, өз ойыңызды жеткізе білдіңіз.";
                feedbackTitle.innerText = "Өте жақсы нәтиже";
                feedbackTitle.className = "font-bold text-xl header-font text-green-700";
            } else if (totalScore >= 3) {
                feedbackText.innerText = "Жақсы, бірақ толықтыруларды қажет етеді. Көрсетілген ескертулерге назар аударыңыз.";
                feedbackTitle.innerText = "Орташа нәтиже";
                feedbackTitle.className = "font-bold text-xl header-font text-blue-700";
            } else {
                feedbackText.innerText = "Әлі де жұмыс жасау керек. Тапсырманы мұқият орындап, қайта жіберіңіз.";
                feedbackTitle.innerText = "Төмен нәтиже";
                feedbackTitle.className = "font-bold text-xl header-font text-red-700";
            }
        }

        renderQuiz();

    </script>
</body>
</html>